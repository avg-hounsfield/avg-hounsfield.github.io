<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radex - Imaging Appropriateness Guide</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Radex helps radiology residents find appropriate imaging studies based on ACR Appropriateness Criteria. Fast, evidence-based imaging guidance.">
  <meta name="keywords" content="radiology, imaging protocols, ACR, appropriateness criteria, MRI protocols, CT, ultrasound, medical imaging, radiology education">
  <meta name="author" content="CoreGRAI">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Radex - Imaging Appropriateness Guide">
  <meta property="og:description" content="Find appropriate imaging studies based on ACR Appropriateness Criteria. Built for radiology residents.">
  <meta property="og:url" content="https://radex.app">
  <meta property="og:site_name" content="Radex">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Radex - Imaging Appropriateness Guide">
  <meta name="twitter:description" content="Find appropriate imaging studies based on ACR Appropriateness Criteria.">

  <!-- Theme Color -->
  <meta name="theme-color" content="#9B5DE5">

  <link rel="stylesheet" href="css/main.css?v=20260129e">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%23fafafa'/><stop offset='100%25' stop-color='%239B5DE5'/></linearGradient></defs><text y='.9em' font-size='90' font-weight='700' font-family='system-ui' fill='url(%23g)'>R</text></svg>">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="header-brand">
        <span class="brand-text">Radex</span>
      </div>
      <nav class="header-nav" role="navigation" aria-label="Main navigation">
        <button class="nav-link active" data-view="search" aria-pressed="true">Search</button>
        <button class="nav-link" data-view="protocols" aria-pressed="false">Protocols</button>
      </nav>
      <!-- Mobile menu button -->
      <button class="mobile-menu-btn hidden" id="mobileMenuBtn" aria-label="Toggle menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Anatomy Selector -->
      <section class="anatomy-section" aria-labelledby="region-title">
        <h1 class="section-title" id="region-title">Select Body Region</h1>
        <div class="anatomy-grid" role="group" aria-label="Body region selection">
          <button class="anatomy-btn" data-region="neuro" aria-label="Neuro imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <circle cx="12" cy="8" r="5"/>
              <path d="M12 13v4M8 21h8"/>
            </svg>
            <span>Neuro</span>
          </button>
          <button class="anatomy-btn" data-region="spine" aria-label="Spine imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <path d="M12 2v20M9 5h6M9 9h6M9 13h6M9 17h6"/>
            </svg>
            <span>Spine</span>
          </button>
          <button class="anatomy-btn" data-region="chest" aria-label="Chest imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <path d="M12 4c-4 0-7 3-7 7v6h14v-6c0-4-3-7-7-7z"/>
              <path d="M9 11h6M12 11v4"/>
            </svg>
            <span>Chest</span>
          </button>
          <button class="anatomy-btn" data-region="abdomen" aria-label="Abdomen imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <ellipse cx="12" cy="12" rx="7" ry="8"/>
              <path d="M8 10c0 2 4 2 4 0M12 10c0 2 4 2 4 0"/>
            </svg>
            <span>Abdomen</span>
          </button>
          <button class="anatomy-btn" data-region="msk" aria-label="Musculoskeletal imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <path d="M8 2v8l-3 12M16 2v8l3 12"/>
              <circle cx="12" cy="6" r="2"/>
            </svg>
            <span>MSK</span>
          </button>
          <button class="anatomy-btn" data-region="vascular" aria-label="Vascular imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <path d="M12 2c0 4-4 6-4 10a4 4 0 108 0c0-4-4-6-4-10z"/>
            </svg>
            <span>Vascular</span>
          </button>
          <button class="anatomy-btn" data-region="breast" aria-label="Breast imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <circle cx="8" cy="12" r="4"/>
              <circle cx="16" cy="12" r="4"/>
            </svg>
            <span>Breast</span>
          </button>
          <button class="anatomy-btn" data-region="peds" aria-label="Pediatric imaging">
            <svg class="anatomy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <circle cx="12" cy="6" r="4"/>
              <path d="M12 10v6M8 22l4-6 4 6"/>
            </svg>
            <span>Pediatric</span>
          </button>
        </div>

        <!-- Info Card -->
        <div class="info-card">
          <div class="info-card-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <path d="M9 12h6M12 9v6"/>
              <circle cx="12" cy="12" r="10"/>
            </svg>
          </div>
          <div class="info-card-content">
            <h2 class="info-card-title">What is Radex?</h2>
            <p class="info-card-text">
              Radex is a quick-reference tool for radiology residents and medical professionals.
              Select a body region above to search clinical scenarios and see imaging recommendations
              based on <strong>ACR Appropriateness Criteria</strong> - evidence-based guidelines that help
              determine the most suitable imaging study for specific clinical conditions.
            </p>
            <p class="info-card-note">
              For educational purposes only. Always verify with institutional protocols and clinical judgment.
            </p>
          </div>
        </div>
      </section>

      <!-- Protocols Section (for direct protocol lookup) -->
      <section class="protocols-section hidden" id="protocolsSection">
        <div class="protocols-header">
          <h1 class="section-title">MRI Protocol Lookup</h1>
          <p class="section-subtitle">Search for a specific MRI protocol to view sequences and parameters</p>
        </div>

        <!-- Filters -->
        <div class="protocol-filters">
          <!-- Region Filter Chips -->
          <div class="filter-group">
            <span class="filter-label">Region:</span>
            <div class="filter-chips" id="regionFilterChips">
              <button class="filter-chip active" data-region="all">All</button>
              <button class="filter-chip" data-region="neuro">Neuro</button>
              <button class="filter-chip" data-region="spine">Spine</button>
              <button class="filter-chip" data-region="msk">MSK</button>
              <button class="filter-chip" data-region="abdomen">Abdomen</button>
              <button class="filter-chip" data-region="chest">Chest</button>
              <button class="filter-chip" data-region="vascular">Vascular</button>
              <button class="filter-chip" data-region="breast">Breast</button>
            </div>
          </div>

          <!-- Contrast Toggle -->
          <div class="filter-group">
            <span class="filter-label">Contrast:</span>
            <div class="contrast-toggle" id="contrastToggle">
              <button class="toggle-btn active" data-contrast="all">All</button>
              <button class="toggle-btn" data-contrast="without">Without</button>
              <button class="toggle-btn" data-contrast="with">With</button>
            </div>
          </div>

          <!-- Source Toggle (Human Verified vs AI Enhanced) -->
          <div class="filter-group">
            <span class="filter-label">Source:</span>
            <div class="source-toggle" id="sourceToggle">
              <button class="toggle-btn active" data-source="all">All</button>
              <button class="toggle-btn" data-source="human">Human Verified</button>
              <button class="toggle-btn" data-source="ai">AI Enhanced</button>
            </div>
          </div>

          <!-- View Toggle -->
          <div class="filter-group">
            <span class="filter-label">View:</span>
            <div class="view-toggle" id="viewToggle">
              <button class="toggle-btn active" data-view="grid" aria-label="Grid view">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                  <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
                </svg>
              </button>
              <button class="toggle-btn" data-view="grouped" aria-label="Grouped view">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="protocol-search-container">
          <div class="search-input-wrap large">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input
              type="text"
              class="search-input"
              id="protocolSearchInput"
              placeholder="e.g., Brain, Knee, Lumbar Spine, Shoulder..."
              autocomplete="off"
              aria-label="Search MRI protocols"
            >
            <button class="search-clear hidden" id="protocolSearchClear" aria-label="Clear search">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Protocol Results Grid -->
        <div class="protocol-results" id="protocolResults">
          <div class="protocol-grid" id="protocolGrid">
            <!-- Dynamically populated with protocol cards -->
          </div>
        </div>

        <!-- Protocol Detail View (shows when protocol selected) -->
        <div class="protocol-detail hidden" id="protocolDetail">
          <button class="protocol-back-btn" id="protocolBackBtn" aria-label="Back to protocol results">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back to results
          </button>

          <div class="protocol-detail-header">
            <div class="protocol-detail-title-row">
              <h2 class="protocol-detail-name" id="protocolDetailName">Protocol Name</h2>
              <div class="protocol-quick-actions">
                <button class="quick-action-btn" id="copyProtocolBtn" title="Copy sequences to clipboard">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2"/>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                  </svg>
                  <span>Copy</span>
                </button>
                <button class="quick-action-btn" id="bookmarkProtocolBtn" title="Bookmark this protocol">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
                  </svg>
                  <span>Bookmark</span>
                </button>
              </div>
            </div>
            <div class="protocol-detail-meta">
              <span class="source-badge curated" id="protocolDetailSource" title="Protocol verified by radiologists">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span id="protocolDetailSourceText">Human Verified</span>
              </span>
              <span class="contrast-badge" id="protocolDetailContrast">No Contrast</span>
              <span class="body-region-badge" id="protocolDetailRegion">Neuro</span>
              <span class="scan-time-badge" id="protocolDetailTime">~15 min</span>
            </div>
          </div>

          <div class="protocol-detail-content">
            <!-- Indications -->
            <div class="protocol-section">
              <h3 class="protocol-section-title">Indications</h3>
              <p class="protocol-indications" id="protocolDetailIndications">-</p>
            </div>

            <!-- Sequences Timeline -->
            <div class="protocol-section">
              <h3 class="protocol-section-title">Sequences</h3>
              <div class="sequence-timeline" id="protocolDetailTimeline">
                <!-- Visual timeline showing pre/post contrast -->
              </div>
              <div class="protocol-sequences-list" id="protocolDetailSequences">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Clinical Pearls (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailPearlsSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5"/>
                  <path d="M2 12l10 5 10-5"/>
                </svg>
                Clinical Pearls
              </h3>
              <ul class="clinical-pearls-list" id="protocolDetailPearls">
                <!-- Dynamically populated -->
              </ul>
            </div>

            <!-- Patient Prep (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailPrepSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon">
                  <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                  <circle cx="8.5" cy="7" r="4"/>
                  <path d="M20 8v6M23 11h-6"/>
                </svg>
                Patient Preparation
              </h3>
              <div class="patient-prep-grid" id="protocolDetailPrep">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Contraindications (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailContraSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M4.93 4.93l14.14 14.14"/>
                </svg>
                Contraindications
              </h3>
              <div class="contraindications-content" id="protocolDetailContra">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Red Flags (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailRedFlagsSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon red-flag-icon">
                  <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                  <line x1="4" y1="22" x2="4" y2="15"/>
                </svg>
                Red Flags
              </h3>
              <ul class="red-flags-list" id="protocolDetailRedFlags">
                <!-- Dynamically populated -->
              </ul>
            </div>

            <!-- Sequence Rationale (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailRationaleSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
                  <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                Sequence Rationale
              </h3>
              <div class="sequence-rationale-list" id="protocolDetailSeqRationale">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- When to Upgrade/Downgrade (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailUpgradeSection">
              <h3 class="protocol-section-title">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="section-icon">
                  <path d="M12 20V10M18 20V4M6 20v-4"/>
                </svg>
                Protocol Modifications
              </h3>
              <div class="upgrade-downgrade-content" id="protocolDetailUpgrade">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Contrast Rationale (if applicable) -->
            <div class="protocol-section hidden" id="protocolDetailContrastSection">
              <h3 class="protocol-section-title">Contrast Rationale</h3>
              <p class="protocol-contrast-rationale" id="protocolDetailRationale">-</p>
            </div>

            <!-- Scanner Notes (if available) -->
            <div class="protocol-section hidden" id="protocolDetailNotesSection">
              <h3 class="protocol-section-title">Scanner Notes</h3>
              <div class="protocol-scanner-notes" id="protocolDetailNotes">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Alternative Protocols (from enrichment) -->
            <div class="protocol-section hidden" id="protocolDetailAlternativesSection">
              <h3 class="protocol-section-title">Alternative Protocols</h3>
              <div class="alternatives-list" id="protocolDetailAlternatives">
                <!-- Dynamically populated -->
              </div>
            </div>

            <!-- Related Protocols -->
            <div class="protocol-section" id="protocolDetailRelatedSection">
              <h3 class="protocol-section-title">Related Protocols</h3>
              <div class="related-protocols-grid" id="protocolDetailRelated">
                <!-- Dynamically populated -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Search Section (hidden until region selected) -->
      <section class="search-section hidden" id="searchSection" aria-labelledby="regionTitle">
        <div class="search-header">
          <button class="back-btn" id="backBtn" aria-label="Back to body region selection">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
          </button>
          <h2 class="search-region-title" id="regionTitle">Neuro</h2>
        </div>

        <div class="search-container">
          <div class="search-input-wrap">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input
              type="text"
              class="search-input"
              id="searchInput"
              placeholder="Describe the clinical scenario..."
              autocomplete="off"
              aria-label="Search clinical scenarios"
            >
            <button class="search-clear hidden" id="searchClear" aria-label="Clear search">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </button>
            <!-- Query History Dropdown -->
            <div class="query-history-dropdown hidden" id="queryHistoryDropdown">
              <div class="query-history-header">
                <span>Recent Searches</span>
                <button class="query-history-clear" id="queryHistoryClear" aria-label="Clear search history">Clear</button>
              </div>
              <ul class="query-history-list" id="queryHistoryList">
                <!-- Dynamically populated -->
              </ul>
            </div>
          </div>

          <!-- Concept Match Header (shows when concept search matches) -->
          <div class="concept-header hidden" id="conceptHeader">
            <!-- Dynamically populated: shows "Brain Tumor - Oncology" when concept matched -->
          </div>

          <!-- Phase Filter Chips (for concept search results) -->
          <div class="phase-filter-chips hidden" id="phaseFilterChips">
            <!-- Dynamically populated: [Screening (2)] [Initial (3)] [Surveillance (2)] -->
          </div>

          <!-- Clarifying Prompts (for keyword search) -->
          <div class="clarify-chips hidden" id="clarifyChips">
            <!-- Dynamically populated -->
          </div>

          <!-- Differential Card (RadLITE) -->
          <div class="differential-card hidden" id="differentialCard">
            <!-- Dynamically populated -->
          </div>
        </div>

        <!-- Two-Panel Results Layout -->
        <div class="results-layout">
          <!-- Scenarios Panel (Left) -->
          <div class="scenarios-panel" id="scenariosPanel">
            <div class="panel-header">
              <h3>Clinical Scenarios</h3>
              <span class="result-count" id="resultCount">0 results</span>
            </div>
            <div class="scenarios-list" id="scenariosList">
              <div class="empty-state">
                <p>Enter a clinical scenario to search</p>
              </div>
            </div>
          </div>

          <!-- Procedures Panel (Right) - THE KEY INFO -->
          <div class="procedures-panel" id="proceduresPanel">
            <div class="panel-header">
              <h3>Imaging Recommendations</h3>
              <span class="panel-subtitle" id="selectedScenario"></span>
            </div>
            <div class="procedures-list" id="proceduresList">
              <div class="empty-state">
                <p>Select a scenario to see imaging recommendations</p>
              </div>
            </div>
          </div>
        </div>

        <!-- MRI Protocol Card (Bottom) - Only shows when MRI selected -->
        <div class="mri-protocol-card hidden" id="mriProtocolCard">
          <div class="protocol-card-header">
            <div class="protocol-card-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="2" y="3" width="20" height="14" rx="2"/>
                <path d="M8 21h8M12 17v4"/>
              </svg>
              <span id="protocolName">MRI Protocol</span>
            </div>
            <div class="protocol-card-meta">
              <span class="source-badge curated hidden" id="sourceBadge" title="Protocol source">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                  <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
                <span id="sourceBadgeText">Human Verified</span>
              </span>
              <span class="contrast-badge" id="contrastBadge">No Contrast</span>
            </div>
          </div>
          <div class="protocol-card-content">
            <div class="sequences-grid" id="sequencesGrid">
              <!-- Dynamically populated -->
            </div>
            <div class="protocol-rationale hidden" id="protocolRationale">
              <!-- Contrast rationale if applicable -->
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
      <div class="footer-content">
        <div class="footer-links">
          <button class="footer-link" id="aboutBtn">About</button>
          <span class="footer-divider">|</span>
          <button class="footer-link" id="termsBtn">Terms</button>
          <span class="footer-divider">|</span>
          <a href="https://www.acr.org/Clinical-Resources/Clinical-Tools-and-Reference/Appropriateness-Criteria" target="_blank" rel="noopener" class="footer-link">ACR Guidelines</a>
          <span class="footer-divider">|</span>
          <a href="https://www.radsreview.net" target="_blank" rel="noopener" class="footer-link">RadsReview</a>
          <span class="footer-divider">|</span>
          <a href="https://coregrai.com" target="_blank" rel="noopener" class="footer-link">CoreGRAI</a>
        </div>
        <p class="footer-copyright">&copy; 2025 CoreGRAI. Educational use only.</p>
      </div>
    </footer>
  </div>

  <!-- About Modal -->
  <div class="modal hidden" id="aboutModal" role="dialog" aria-modal="true" aria-labelledby="aboutModalTitle">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-content">
      <button class="modal-close" data-close="true" aria-label="Close modal">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
      <h2 class="modal-title" id="aboutModalTitle">About Radex</h2>
      <div class="modal-body">
        <p>
          Radex is an educational reference tool designed for radiology residents and medical professionals
          to quickly access imaging appropriateness criteria and MRI protocol information.
        </p>

        <h3>Data Sources</h3>
        <p>
          <strong>Appropriateness Criteria:</strong> Based on the ACR Appropriateness Criteria,
          evidence-based guidelines developed by the American College of Radiology to assist referring
          physicians and other providers in making the most appropriate imaging decisions.
        </p>
        <p>
          <strong>MRI Protocols:</strong> Sample protocols based on common clinical practice.
          <em>Your institution may have different sequences, parameters, or protocols based on
          scanner hardware, software versions, radiologist preferences, and institutional policies.</em>
        </p>

        <h3>Important Notice</h3>
        <p>
          This tool is provided for <strong>educational purposes only</strong>. It is not a substitute
          for clinical judgment, institutional protocols, or direct consultation with radiologists.
          Imaging decisions should always be made in the context of individual patient circumstances.
        </p>

        <h3>Feedback</h3>
        <p>
          Questions or suggestions? Contact us at
          <a href="mailto:contact@coregrai.com">contact@coregrai.com</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Terms Modal -->
  <div class="modal hidden" id="termsModal" role="dialog" aria-modal="true" aria-labelledby="termsModalTitle">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-content">
      <button class="modal-close" data-close="true" aria-label="Close modal">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
      <h2 class="modal-title" id="termsModalTitle">Terms of Use</h2>
      <div class="modal-body terms-content">
        <p><strong>Last Updated:</strong> January 2025</p>

        <h3>1. Educational Purpose</h3>
        <p>
          Protocol Help ("the Service") is provided exclusively for educational and informational purposes.
          The information contained herein should not be used as a substitute for professional medical
          advice, diagnosis, or treatment.
        </p>

        <h3>2. No Medical Advice</h3>
        <p>
          The content provided by this Service does not constitute medical advice and should not be
          relied upon for clinical decision-making. Always consult qualified healthcare professionals
          and follow your institution's established protocols.
        </p>

        <h3>3. Accuracy Disclaimer</h3>
        <p>
          While we strive to provide accurate and up-to-date information based on ACR Appropriateness
          Criteria, we make no warranties regarding the completeness, accuracy, or reliability of
          any information. Protocol sequences shown are representative examples and may differ from
          your institution's specific protocols.
        </p>

        <h3>4. Limitation of Liability</h3>
        <p>
          CoreGRAI and its affiliates shall not be liable for any direct, indirect, incidental,
          consequential, or punitive damages arising from your use of or inability to use this Service.
        </p>

        <h3>5. Intellectual Property</h3>
        <p>
          ACR Appropriateness Criteria are developed by the American College of Radiology.
          References to ACR content are used for educational purposes in accordance with fair use principles.
        </p>

        <h3>6. Use Restrictions</h3>
        <p>
          You agree not to use this Service for any unlawful purpose or in any way that could damage,
          disable, or impair the Service. Commercial use requires explicit written permission.
        </p>

        <h3>7. Changes to Terms</h3>
        <p>
          We reserve the right to modify these terms at any time. Continued use of the Service
          constitutes acceptance of any changes.
        </p>

        <h3>8. Contact</h3>
        <p>
          For questions about these Terms, contact: <a href="mailto:contact@coregrai.com">contact@coregrai.com</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Welcome/Disclaimer Modal (shows on first visit, blocks until acknowledged) -->
  <div class="modal welcome-modal" id="welcomeModal" role="dialog" aria-modal="true" aria-labelledby="welcomeModalTitle">
    <div class="modal-backdrop"></div>
    <div class="modal-content welcome-content">
      <div class="welcome-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 8v4M12 16h.01"/>
        </svg>
      </div>
      <h2 class="modal-title" id="welcomeModalTitle">Welcome to Radex</h2>
      <div class="welcome-body">
        <p class="welcome-highlight">
          <strong>Educational Reference Only</strong>
        </p>
        <p>
          This tool provides imaging appropriateness guidance based on ACR Appropriateness Criteria
          and sample MRI protocols. Content has been generated with the assistance of AI.
        </p>
        <ul class="welcome-list">
          <li>Always verify information with your institution's policies and protocols</li>
          <li>This tool does not constitute medical advice</li>
          <li>Clinical judgment should always take precedence</li>
        </ul>
        <p class="welcome-note">
          By continuing, you acknowledge that you understand this is for educational purposes only.
        </p>
      </div>
      <button class="welcome-btn" id="welcomeAcknowledge">I Understand - Continue</button>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Force service worker update on version change
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(registrations => {
        const currentVersion = 'radex-v2.1.0';
        const storedVersion = localStorage.getItem('radex_sw_version');
        if (storedVersion !== currentVersion) {
          // Version mismatch - unregister old SW and clear caches
          registrations.forEach(reg => reg.unregister());
          caches.keys().then(names => names.forEach(name => caches.delete(name)));
          localStorage.setItem('radex_sw_version', currentVersion);
          // Reload after cache clear
          if (storedVersion) location.reload(true);
        }
      });
    }
  </script>
  <script type="module" src="js/app.js?v=20260129b"></script>
</body>
</html>
